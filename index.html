<!doctype html>
<html lang="es">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Quito: La Ciudad que Late</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css">
		<script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
		<style>
			.reveal .slides {
				width: 100% !important;
                /* background-color: #00FF00; */
			}

			.grafico-container {
				width: 100%;
				height: 100vh;
				display: flex;
				justify-content: center;
				margin: 0 auto;
				overflow: hidden;
				max-width: 100vw;
				padding: 0;
				box-sizing: border-box;
				overflow: hidden;
                /* background-color: #AAAAAA; */
			}

			.grafico-container iframe {
				width: 100% !important;
				height: 800px !important;
				overflow: hidden;
                display: block;
                border-style:none;
                /* background-color: #0000FF; */
			}

			.reveal h1 {
				font-size: 1.5em;
				margin-bottom: 0.5em;
                padding-left: 20%;
                padding-right: 20%;
			}

			.reveal h2 {
				font-size: 1.1em;
				margin-bottom: 0.5em;
				margin-top: 0.5em;
                padding-left: 20%;
                padding-right: 20%;
			}

			.reveal h3 {
				font-size: 0.8em;
				margin-bottom: 0.3em;
                padding-left: 20%;
                padding-right: 20%;
			}

			/* Ajustar el espacio entre el tÃ­tulo y el grÃ¡fico */
			.reveal section {
				padding-top: 0.5em;
                /* background-color: #FF0000; */
			}

			/* Asegurar que el texto sea legible sobre fondo blanco */
			.reveal {
				color: #2C3E50;
			}

			/* Estilos especÃ­ficos para cada grÃ¡fico */
			.grafico-1 iframe {
				transform: scale(1) translate(100px, 0px);
			}

			.grafico-2 iframe {
				transform: scale(0.75) translate(0px, -80px);
			}

			.grafico-3 iframe {
				transform: scale(0.75) translate(0px, -150px);
			}
			
			.grafico-4 iframe {
				transform: scale(0.75) translate(0px, -100px);
			}

			.grafico-5 iframe {
				transform: scale(0.9) translate(0px, -40px);
			}   

			.grafico-6 iframe {
				transform: scale(0.75) translate(0px, -100px);
			}   

			.grafico-7 iframe {
				transform: scale(0.55) translate(0px, -250px);
			}   

			.grafico-8 iframe {
				transform: scale(0.55) translate(0px, -250px);
			}      

			.grafico-9 iframe {
				transform: scale(0.75) translate(0px, -100px);
			}

			.grafico-10 iframe {
				transform: scale(1) translate(0px, -100px);
			}

			.grafico-11 iframe {
				transform: scale(1) translate(0px, 0px);
			}

			.grafico-12 iframe {
				transform: scale(1) translate(0px, 0px);
			}

			.grafico-13 iframe {
				transform: scale(0.65) translate(0px, -180px);
			}

			.grafico-14 iframe {
				transform: scale(0.85) translate(0px, -100px);
			}

			.grafico-15 iframe {
				transform: scale(.85) translate(0px, 0px);
			}

			/* Clase para slides que solo tienen texto */
			.slide-solo-texto {
				display: flex !important;
				flex-direction: column !important;
				justify-content: center !important;
				align-items: center !important;
				height: 100vh !important;
				position: absolute !important;
				top: 0 !important;
				left: 0 !important;
				right: 0 !important;
				bottom: 0 !important;
				margin: 0 !important;
				transform: translateY(-14%) !important;
			}

			/* Asegurar que los elementos dentro de slide-solo-texto estÃ©n centrados */
			.slide-solo-texto h1,
			.slide-solo-texto h2,
			.slide-solo-texto h3,
            .slide-solo-texto p {
				text-align: center !important;
				margin: 0.5em 0 !important;
                padding-left: 20%;
                padding-right: 20%;
			}

			/* Estilos para el texto sobre el video */
			.slide-solo-texto[data-background-video] h1,
			.slide-solo-texto[data-background-video] h3 {
				color: white;
				text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
			}

			.meme-container {
				width: 100%;
				height: 80vh;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: flex-start;
				padding-top: 15vh;
                transform: scale(.75) translate(0px, -250px);
			}

			.imagen-container {
				width: 80%;
				height: 60vh;
				margin-bottom: 40px;
			}

			.imagen-container img {
				width: 100%;
				height: 100%;
				object-fit: contain;
			}

			.broma-container {
				width: 100%;
				text-align: center;
				padding: 0 20px;
				margin-top: auto;
				margin-bottom: 40px;
			}

			.broma-container p {
				font-size: 1.5em;
				margin: 0;
				color: #2C3E50;
			}

			/* Estilos especÃ­ficos para el slide de cierre */
			.slide-cierre .broma-container {
				display: flex;
				flex-direction: column;
				align-items: center;
				gap: 1em;
			}

			.slide-cierre .broma-container h2 {
				font-size: 0.9em;
				margin: 0;
				color: #2C3E50;
			}

			.slide-cierre .broma-container h3 {
				font-size: 0.7em;
				margin: 0;
				color: #2C3E50;
				font-style: italic;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<!-- SLIDE 1: Portada -->
				<section class="slide-video" data-background-video="assets/videos/quito-amanecer-p.mp4" data-background-video-audio/>
                <h1> </h1>
                </section>
				<!-- SLIDE 2: IntroducciÃ³n narrativa -->
				<section class="slide-solo-texto">
					<audio id="latido" src="assets/audio/latido.mp3"></audio>
					<h2>Cada ciudad tiene un corazÃ³n.</h2>
					<h3>Cada latido es una historia.</h3>
					<h3>Cada historia, un dato esperando ser escuchado.</h3>
				</section>

				<!-- SLIDE 3.1: Hora mÃ¡s tranquila -->
				<section>
					<section>
                        <h2>Â¿A quÃ© hora estÃ¡ mÃ¡s tranquila la ciudad?</h2>
                        <div class="grafico-container grafico-1">
                            <iframe src="assets/graphs/grafico1.html" frameborder="0" style="width: 100%; height: 100%;"></iframe>
						</div>
					</section>
					<!-- SLIDE 3.2: Delitos por zona -->
					<section>
						<h2>Â¿DÃ³nde se concentran los delitos segÃºn la hora del dÃ­a?</h2>
						<div class="grafico-container grafico-2">
							<iframe src="assets/graphs/grafico2.html" frameborder="0" style="width: 100%; height: 100%;"></iframe>
						</div>
						<button id="playAudio3_2" style="position: absolute; bottom: 42%; right: 22%; padding: 8px; width: 35px; height: 35px; background-color: #2C3E50; color: white; border: none; border-radius: 50%; cursor: pointer; z-index: 1000; font-size: 16px; display: flex; align-items: center; justify-content: center;">ðŸ”Š</button>
						<audio id="audio3_2" src="assets/audio/Audio3.1.2.mp3"></audio>
					</section>
				</section>

				<!-- SLIDE 4: Seguridad por administraciÃ³n -->
				<section>
					<h2>Â¿QuÃ© tan segura fue tu administraciÃ³n zonal este aÃ±o?</h2>
					<div class="grafico-container grafico-3">
						<iframe src="assets/graphs/grafico3.html" frameborder="0"></iframe>
					</div>
					<button id="playAudio4" style="position: absolute; bottom: 42%; right: 22%;; padding: 8px; width: 35px; height: 35px; background-color: #2C3E50; color: white; border: none; border-radius: 50%; cursor: pointer; z-index: 1000; font-size: 16px; display: flex; align-items: center; justify-content: center;">ðŸ”Š</button>
					<audio id="audio4" src="assets/audio/Audio4.mp3"></audio>
				</section>

				<!-- SLIDE 5: RelaciÃ³n costo-seguridad -->
				<section>
					<h2>Â¿Afecta la seguridad el costo de vivir en una zona?</h2>
					<div class="grafico-container grafico-4">
						<iframe src="assets/graphs/grafico4.html" frameborder="0" style="width: 100%; height: 100%;"></iframe>
					</div>
                    <button id="playAudio5" style="position: absolute; bottom: 42%; right: 22%;; padding: 8px; width: 35px; height: 35px; background-color: #2C3E50; color: white; border: none; border-radius: 50%; cursor: pointer; z-index: 1000; font-size: 16px; display: flex; align-items: center; justify-content: center;">ðŸ”Š</button>
					<audio id="audio5" src="assets/audio/Audio5.mp3"></audio>
				</section>

				<!-- SLIDE 6: DÃ­as de la semana -->
				<section>
					<section>
						<h2>Â¿En quÃ© dÃ­as es mÃ¡s riesgoso salir?</h2>
						<div class="grafico-container grafico-5">
							<iframe src="assets/graphs/grafico5.html" frameborder="0" style="width: 100%; height: 100%;"></iframe>
						</div>
					</section>

					<section>
						<h2>Â¿Y si lo vemos por zonas?</h2>
						<div class="grafico-container grafico-6">
							<iframe src="assets/graphs/grafico6.html" frameborder="0" style="width: 100%; height: 100%;"></iframe>
						</div>
						<button id="playAudio6_2" style="position: absolute; bottom: 42%; right: 22%;; padding: 8px; width: 35px; height: 35px; background-color: #2C3E50; color: white; border: none; border-radius: 50%; cursor: pointer; z-index: 1000; font-size: 16px; display: flex; align-items: center; justify-content: center;">ðŸ”Š</button>
						<audio id="audio6_2" src="assets/audio/Audio6.1.2.mp3"></audio>
					</section>
				</section>

				<!-- SLIDE 7: Parroquias -->
				<section>
					<section>
						<h2>Â¿QuÃ© parroquias rurales estÃ¡n logrando contener los delitos?</h2>
						<div class="grafico-container grafico-7">
							<iframe src="assets/graphs/grafico7.html" frameborder="0" style="width: 100%; height: 100%;"></iframe>
						</div>
					</section>

					<section>
						<h2>Â¿Y quÃ© parroquias urbanas tambiÃ©n lo estÃ¡n haciendo bien?</h2>
						<div class="grafico-container grafico-8">
							<iframe src="assets/graphs/grafico8.html" frameborder="0" style="width: 100%; height: 100%;"></iframe>
						</div>
						<button id="playAudio7_2" style="position: absolute; bottom: 42%; right: 22%;; padding: 8px; width: 35px; height: 35px; background-color: #2C3E50; color: white; border: none; border-radius: 50%; cursor: pointer; z-index: 1000; font-size: 16px; display: flex; align-items: center; justify-content: center;">ðŸ”Š</button>
						<audio id="audio7_2" src="assets/audio/Audio7.1.2.mp3"></audio>
					</section>
				</section>

				<!-- SLIDE 8: Feriados -->
				<section>
					<h2>Â¿QuÃ© feriados fueron los mÃ¡s seguros en 2024?</h2>
					<div class="grafico-container grafico-9">
						<iframe src="assets/graphs/grafico9.html" frameborder="0" style="width: 100%; height: 100%;"></iframe>
					</div>
					<button id="playAudio8" style="position: absolute; bottom: 42%; right: 22%;; padding: 8px; width: 35px; height: 35px; background-color: #2C3E50; color: white; border: none; border-radius: 50%; cursor: pointer; z-index: 1000; font-size: 16px; display: flex; align-items: center; justify-content: center;">ðŸ”Š</button>
					<audio id="audio8" src="assets/audio/Audio8.mp3"></audio>
				</section>

				<!-- SLIDE 9: Cierre -->
				<section class="slide-solo-texto">
					<h1>Cada dato late por un Quito mÃ¡s seguro.</h1>
				</section>

				<!-- SLIDE 10: SecciÃ³n de bromas - IntroducciÃ³n -->
				<section class="slide-solo-texto">
					<h1>Lo que no mostramos en la presentaciÃ³n principal (pero sÃ­ investigamos...)</h1>
					<h3>Humor, datos duros y curiosidades que no cabÃ­an en la versiÃ³n seria.</h3>
				</section>

                <section class="slide-solo-texto">
                    <p style="font-size: 0.8em; margin-top: 2em;">Esta secciÃ³n no busca restar seriedad, sino ofrecer otra forma de digerir datos que tambiÃ©n nos incomodan.</p>
                    <div class="imagen-container">
                        <img src="assets/images/1.png" alt="Imagen broma 1">
                    </div>
                </section>

				<!-- SLIDE 11: SecciÃ³n de bromas - Contenido -->
				<section>
					<section>
						<h2>Â¿CuÃ¡l fue el dÃ­a mÃ¡s violento?</h2>
						<div class="grafico-container grafico-10">
							<iframe src="assets/graphs/grafico10.html" frameborder="0"></iframe>
						</div>
					</section>

					<section>
						<div class="meme-container">
							<div class="imagen-container">
								<img src="assets/images/2.png" alt="Imagen broma 2">
							</div>
							<div class="broma-container">
								<p>Solo era juevesâ€¦ pero el jueves tenÃ­a otros planes.</p>
							</div>
						</div>
					</section>

					<section>
						<h2>Parroquias con peor tasa de delitos</h2>
						<div class="grafico-container grafico-11">
							<iframe src="assets/graphs/grafico11.html" frameborder="0"></iframe>
						</div>
					</section>

					<section>
						<div class="meme-container">
							<div class="imagen-container">
								<img src="assets/images/3.png" alt="Imagen broma 3">
							</div>
							<div class="broma-container">
								<p>Â¿Caldebronx? Mijo, ahÃ­ ni el wifi se atreve a entrar.</p>
							</div>
						</div>
					</section>

                    <section>
                        <h2>Top 5 modalidades delictivas</h2>
                        <div class="grafico-container grafico-12">
							<iframe src="assets/graphs/grafico12.html" frameborder="0"></iframe>
						</div>
                        <p id="broma12" style="position: absolute; font-size: 0.8em; top: 600px; left: 20px; padding: 8px; width: 100%; z-index: 1000; display: flex; align-items: center; justify-content: center;">
                            Ni el chulla mÃ¡s chulla se salva del man que arrancha con fe.
                        </p>
					</section>

					<section>
						<h2>Â¿CuÃ¡ndo es mÃ¡s peligroso salir?</h2>
						<div class="grafico-container grafico-13">
							<iframe src="assets/graphs/grafico13.html" frameborder="0"></iframe>
						</div>
					</section>

					<section>
						<div class="meme-container">
							<div class="imagen-container">
								<img src="assets/images/4.png" alt="Imagen broma 5">
							</div>
							<div class="broma-container">
								<p>Quito brilla por sus vistasâ€¦ y por los celulares robados despuÃ©s de las 7.</p>
							</div>
						</div>
					</section>

					<section>
						<h2>Parroquias sin delitos</h2>
						<div class="grafico-container grafico-14">
							<iframe src="assets/graphs/grafico14.html" frameborder="0"></iframe>
						</div>
					</section>

					<section>
						<div class="meme-container">
							<div class="imagen-container">
								<img src="assets/images/5.png" alt="Imagen broma 6">
							</div>
							<div class="broma-container">
								<p>La paz sÃ­ existe. Pero no llega con el trolebus.</p>
							</div>
						</div>
					</section>

					<section>
                        <h2>ComparaciÃ³n dÃ­as laborales vs fines de semana</h2>
                        <div class="grafico-container grafico-15">
                            <iframe src="assets/graphs/grafico15.html" frameborder="0"></iframe>
                        </div>
                        <p id="broma15" style="position: absolute; font-size: 0.8em; top: 600px; left: 20px; padding: 8px; width: 100%; z-index: 1000; display: flex; align-items: center; justify-content: center;">
                            Uno sale a comprar panâ€¦ y regresa con anÃ©cdota policial.
                        </p>
					</section>
				</section>

				<!-- SLIDE 12: Cierre final -->
				<section class="slide-cierre">
					<div class="meme-container">
						<div class="imagen-container">
							<img src="assets/images/6.png" alt="Imagen cierre">
						</div>
						<div class="broma-container">
							<h2>Gracias por acompaÃ±arnos en este espacio donde combinamos datos con realidad.</h2>
							<h3>"No es solo Quito... es Quito con grÃ¡ficos."</h3>
						</div>
					</div>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script>
			Reveal.initialize({
				hash: true,
				backgroundTransition: 'fade'
			});

			// Reproducir el audio cuando se muestra la diapositiva
			Reveal.on('slidechanged', event => {
				if (event.currentSlide.querySelector('#latido')) {
					const audio = event.currentSlide.querySelector('#latido');
					audio.currentTime = 0;
					audio.play();
				}

				// Forzar re-renderizaciÃ³n de todos los grÃ¡ficos cuando se muestra su diapositiva
				const iframes = event.currentSlide.querySelectorAll('iframe');
				iframes.forEach(iframe => {
					iframe.onload = function() {
						// Intentar re-renderizar el grÃ¡fico si existe Plotly
						try {
							if (iframe.contentWindow.Plotly) {
								// Obtener todos los elementos div con clase plotly-graph-div
								const plotDivs = iframe.contentDocument.querySelectorAll('.plotly-graph-div');
								plotDivs.forEach(div => {
									if (div.id) {
										iframe.contentWindow.Plotly.relayout(div.id, {
											'updatemenus[0].buttonwidth': 120,
											'updatemenus[0].font.size': 14
										});
									}
								});
							}
						} catch (e) {
							console.log('No se pudo re-renderizar el grÃ¡fico:', e);
						}
					};
					// Forzar recarga del iframe
					iframe.src = iframe.src;
				});
			});

			// Manejar la reproducciÃ³n del audio para todos los botones
			const audioButtons = [
				'playAudio3_1', 'playAudio3_2', 'playAudio4', 'playAudio5',
				'playAudio6_1', 'playAudio6_2',
				'playAudio7_1', 'playAudio7_2',
				'playAudio8'
			];

			audioButtons.forEach(buttonId => {
				document.getElementById(buttonId).addEventListener('click', function() {
					const audioId = buttonId.replace('play', '').toLowerCase();
					const audio = document.getElementById(audioId);
					audio.currentTime = 0;
					audio.play();
				});
			});
		</script>
	</body>
</html>
